/*
 * longest-arithmetic-sequence.cpp
 *
 *  Created on: May 4, 2019
 *      Author: subha
 */

#include <bits/stdc++.h>
using namespace std;

class Solution {
public:
    int longestArithSeqLength(vector<int>& A) {
        if(A.size() == 0) {
            return 0;
        }


        vector<unordered_map<int,int>> DP(A.size(), unordered_map<int,int>()); //DP[i][j] stores the longest sequence ending at i with diff of j

        int maxLen = 1;

        for(int i=1; i<(int)A.size() ; ++i) {
            for(int k=0; k<i ; ++k) {
                int diff = A[i] - A[k];
                int last = (DP[k].find(diff) != DP[k].end() ? DP[k][diff] : 0);
                DP[i][diff] = max(DP[i][diff], last + 1);
                maxLen= max(maxLen, DP[i][diff]);
            }
        }
        return maxLen+1;
    }
};

int main() {
	vector<int> A;

	A =
	{6311,6890,663,4242,8376,7961,6634,4969,7808,5866,9558,3578,8268,2281,4617,2289,1553,4104,8725,9861,2407,5081,1618,1208,5409,7735,9171,1649,5796,7113,5180,3350,9052,7815,7253,8541,4267,1020,8989,230,1528,6534,18,8086,5458,3996,5328,1031,3130,9298,3632,3909,2334,8896,7339,1494,1318,5243,8322,8016,1786,4938,9031,4769,2044,8969,5451,8852,3329,9882,8965,9627,4712,7290,1501,9769,6306,5194,9431,3966,4756,3012,3102,3059,540,4260,7807,1131,1471,2133,2450,633,1314,8857,6410,8594,4515,8549,3858,3525,9663,6871,9497,4509,7382,8071,5855,1349,5313,1889,7969,9618,5493,3119,3981,265,4440,1919,3612,6095,2793,5448,6981,1018,1648,2397,3584,741,9402,8752,9865,1212,437,2038,3088,9934,9436,1961,6409,1499,6064,1901,596,9920,354,3188,3030,2029,7851,3450,1000,373,8916,6973,1662,4258,1146,3618,1179,4932,5739,7144,2954,1000,8251,7653,645,9772,1653,6410,3266,4262,5874,7704,9335,2775,3332,951,2592,2653,5608,8674,4107,1920,9777,7246,2864,216,7727,6715,9324,8332,5102,5851,6367,4111,2513,9184,203,7503,1295,5503,748,8918,4601,2209,3934,7894,5770,9996,4716,5885,9671,2168,5083,6357,6789,1322,24,9741,3150,5478,2622,3922,3655,7342,6203,9308,6789,516,6590,9297,6852,766,2714,7296,1046,4247,2583,7313,8643,7983,9198,9895,1,637,8103,5340,5112,7649,816,6801,3080,8987,1367,2138,241,6583,6840,5180,55,3498,234,38,8656,1602,3120,1948,9967,3252,4954,4587,2985,1641,7792,6499,1332,357,4500,7421,1896,4202,2185,8533,5686,1885,2530,4561,304,693,666,3370,4254,9148,5156,6011,9297,688,9954,8101,7514,7134,6102,8813,2921,3405,6153,9619,4768,145,2268,2474,4446,5462,5529,6016,1535,5541,584,675,4417,2684,2448,9559,4743,5913,6468,8986,2124,4807,1882,7832,3927,790,5044,2942,8569,1161,4958,6605,5382,4902,6794,1780,1628,9188,7883,7766,5522,5630,2036,7849,1900,8154,6988,619,4946,5489,2550,2728,9248,6153,1424,1078,1387,3244,3621,1001,6304,128,1606,6452,9117,8503,4748,7348,8005,9582,3559,6931,1370,6034,3606,4274,9588,2729,7065,3144,5873,1884,1046,452,8614,7399,3304,1948,8144,6520,4202,3395,689,3537,2397,1714,3243,7510,6193,5925,8952,2479,1716,9768,7993,2431,9239,6650,6934,8539,8116,5283,8166,8169,3309,8893,9990,3584,159,5574,5214,5272,581,8603,2430,4208,9872,2554,6209,9551,4823,7707,1087,1386,8462,645,1087,3687,2138,665,4922,250,7349,5416,2632,2438,7548,6083,8273,6262,
			8680,8231,550,9402,1485,8486,9832,1251,6985,3376,4745,8772,9807,6845,7900,6366,9952,9607,3826,335,3,2981,4955,8304,9343,4169,5450,1075,8085,4292,4961,6685,6294,6286,1020,2683,2086,3914,4703,5472,909,588,7886,6846,2308,8058,9862,1337,2480,5779,6736,576,7639,6335,7518,770,1662,7715,2480,331,531,9802,2174,5306,1725,8997,5679,3194,6281,8033,1818,985,9996,7654,5535,2036,4855,2082,6351,4813,1991,8503,3098,625,6422,7283,6087,3120,7462,5841,1234,731,655,7965,4184,436,8520,9326,9368,3538,3762,1531,8231,8580,6883,8308,5002,1858,2386,6979,9273,6914,1376,1716,6809,1030,1625,6802,2558,503,7319,7062,6832,493,8136,5316,4138,1286,5775,1152,1988,5886,481,5659,5699,2914,163,3776,5993,1155,9774,2347,3407,52,3355,2018,117,4804,6047,403,9909,3815,2324,3063,7439,1841,7810,5643,4230,2132,457,3409,5934,5488,7755,4794,4855,9063,5357,3015,9716,1323,1680,8736,9516,5042,2562,6170,2407,2051,3650,5175,8328,3978,3877,3013,4768,6102,6877,757,2166,9850,336,6452,1276,1199,2163,6885,4905,9023,6828,2331,9684,6917,4882,5809,1385,4064,7287,6049,8670,947,6167,6694,138,6835,5253,7230,3342,6088,4805,7715,1491,3038,1779,4537,1837,9145,9921,2521,7309,6533,3037,6909,7073,2862,4062,7429,5576,8574,2335,5822,7576,1417,7918,3336,4828,30,7357,7569,127,3583,4891,1875,4934,8932,9980,2559,6950,7723,1516,8153,3807,8908,6640,4588,354,1979,4424,664,4,4203,6527,8619,9529,6491,7284,1671,4138,5797,4643,3211,9755,1396,580,1154,4300,5007,8743,5568,1936,8686,4080,2679,1115,6796,4746,4632,8516,2202,9404,8569,3445,8706,1725,6730,8905,6609,4564,4788,7247,6091,9309,2257,2573,2020,1974,6249,6573,9683,7666,2286,9168,4898,5800,7744,6801,3571,7810,8009,8217,5214,8072,986,7274,4918,2339,8118,858,3534,418,5822,7725,6405,165,8631,1088,1333,6473,105,5919,674,1903,61,4429,4792,3714,2304,9385,4717,3132,1727,7110,7551,5409,6293,2756,5418,6909,7131,2425,7328,2416,8587,5178,2117,3422,3060,7276,5720,6371,7000,8060,6382,3607,3214,7197,3346,9609,815,6362,545,3834,1387,3059,5957,933,2840,3818,4874,1419,8390,4660,5784,6740,7508,883,8456,8965,7055,9518,7448,8031,4173,7793,3529,5524,4356,691,717,861,2668,5731,63,4748,116,2300,1043,7008,3639,9971,6496,9138,3620,7433,3159,5562,9966,1676,9934,1402,5226,5290,8780,7466,5327,4186,472,8552,726,3115,6040,1312,3433,8593,5664,3076,3303,4116,4936,5115,8468,6302,4172,7898,5635,3931,729,5010,9043,1185,150,7551,8115,7179,777,6752,8086,7545,7210,1935,1402,1334,3950,1617,2519,6783,3497,7219,1263,6994,9158,6463,644,2955,4091,8028,3605,2098,4571,5768,5236,7124,1757,9126,4677,9995,8864,3296,4860,7238,8421,9906,7570,8784,4276,4465,3797,271,1945,1620,2827,6793,4075,3572,4662,105,8774,8442,7016,815,1995,6302,4464,1937,9251,5880,3761,8956,4623,3630,3934};
	Solution obj;

	cout << obj.longestArithSeqLength(A) << endl;
}

